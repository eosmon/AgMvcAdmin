@using Microsoft.Ajax.Utilities
@model AgMvcAdmin.Models.PageModel



@{
    var mfgId = Model.Menus.ManufId;    
    var mfgSelected = string.Empty;

    var mAll = Model.Gun.Filters.IsMissingAll;    
    var mGtp = Model.Gun.Filters.IsMissingGunType;
    var mCal = Model.Gun.Filters.IsMissingCaliber;
    var mCap = Model.Gun.Filters.IsMissingCapacity;
    var mAtn = Model.Gun.Filters.IsMissingAction;
    var mFin = Model.Gun.Filters.IsMissingFinish;
    var mMdl = Model.Gun.Filters.IsMissingModel;
    var mDsc = Model.Gun.Filters.IsMissingDesc;
    var mLds = Model.Gun.Filters.IsMissingLongDesc;
    var mBrl = Model.Gun.Filters.IsMissingBrlLen;
    var mOvl = Model.Gun.Filters.IsMissingOvrLen;
    var mWgt = Model.Gun.Filters.IsMissingWeight;
    var mImg = Model.Gun.Filters.IsMissingImage;       
           
    var isMsChk = string.Empty;
    var xAll = "false";
    var xGtp = "false";
    var xCal = "false";
    var xCap = "false";
    var xAtn = "false";
    var xFin = "false";
    var xMdl = "false";
    var xDsc = "false";
    var xLds = "false";
    var xBrl = "false";
    var xOvl = "false";
    var xWgt = "false";
    var xImg = "false";

    if (mAll) { xAll = "true"; }
    if (mGtp) { xGtp = "true"; }
    if (mCal) { xCal = "true"; }
    if (mCap) { xCap = "true"; }
    if (mAtn) { xAtn = "true"; }
    if (mFin) { xFin = "true"; }
    if (mMdl) { xMdl = "true"; }
    if (mDsc) { xDsc = "true"; }
    if (mLds) { xLds = "true"; }
    if (mBrl) { xBrl = "true"; }
    if (mOvl) { xOvl = "true"; }
    if (mWgt) { xWgt = "true"; }
    if (mImg) { xImg = "true"; }


    if (mAll || mGtp || mCal || mCap || mAtn || mFin || mMdl || mDsc || mLds || mBrl || mOvl || mWgt || mImg)
    {
        isMsChk = "checked";
    }
    
}

<script language="javascript" type="text/javascript">

    @{ var ct = 1; }
    var manuf = [
        @foreach (var item in Model.Menus.ManufAll.Manufacturers)
        {
        var x = Model.Menus.ManufAll.Manufacturers.Count;
        var cm = ct == x ? "" : ",";
        var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
        @Html.Raw(g)
        ct++;
        }
    ];

    @{ ct = 1; }
    var gunTypes = [
        @foreach (var item in Model.Menus.GunType.GunTypes)
        {
        var x = Model.Menus.GunType.GunTypes.Count;
        var cm = ct == x ? "" : ",";
        var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
        @Html.Raw(g)
        ct++;
        }
    ];



    @{ ct = 1; }
    var calibers = [
        @foreach (var item in Model.Menus.AllCaliber.AllCalibers)
        {
            var x = Model.Menus.AllCaliber.AllCalibers.Count;
            var cm = ct == x ? "" : ",";
            var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
        @Html.Raw(g)
            ct++;
        }
    ];


    @{ ct = 1; }
    var actions = [
        @foreach (var item in Model.Menus.Action.Actions)
        {
            var x = Model.Menus.Action.Actions.Count;
            var cm = ct == x ? "" : ",";
            var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
        @Html.Raw(g)
            ct++;
        }
    ];


    @{ ct = 1; }
    var finishes = [
        @foreach (var item in Model.Menus.Finish.GunFinishes)
        {
            var x = Model.Menus.Finish.GunFinishes.Count;
            var cm = ct == x ? "" : ",";
            var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
        @Html.Raw(g)
            ct++;
        }
    ];


    @{ ct = 1; }
    var conditions = [
        @foreach (var item in Model.Menus.Condition.GunConditions)
    {
        var x = Model.Menus.Condition.GunConditions.Count;
        var cm = ct == x ? "" : ",";
        var g = String.Format("{{ \"Id\": {0}, \"Name\": \"{1}\" }}{2}", item.Value, item.Text, cm) + Environment.NewLine;
    @Html.Raw(g)
        ct++;
    }
    ];


</script>

<div class="well-header">
    <div style="display: inline-block; width: calc(100% - 120px) !important">
        <h3 class="header3">Data Feed Administration</h3>
    </div>
</div>
<div style="height: 20px"></div>
<div id="modal">
    <img src="~/Common/Images/loading.gif" style="width: 100%" />
</div>
<div id="divFeed" class="well-content row" style="margin-left: 0; font-size: 11px !important">
    <form id="gunFeedEdit" action="" method="post">
        <input type="hidden" id="gunsPerPg" value="100" />
        <input type="hidden" id="curPg" value="0" />
        <input type="hidden" id="ttlPgs" value="0" />
        <input type="hidden" id="cond" value="0" />
        <input type="hidden" id="mfgId" name="mfgId" value="@mfgId" />
        <input type="hidden" id="calId" value="0" />
        <input type="hidden" id="atnId" value="0" />
        <input type="hidden" id="ttlRowCt" value="" />
        <input type="hidden" id="ni" name="ni" value="">
        <input type="hidden" id="mid" value="0" />
        <input type="hidden" id="gtp" value="0" />
        <input type="hidden" id="cid" value="0" />
        <input type="hidden" id="aid" value="0" />
        <input type="hidden" id="dbk" value="0" />
        <input type="hidden" id="mAll" value="@xAll" />
        <input type="hidden" id="mGtp" value="@xGtp" />
        <input type="hidden" id="mCal" value="@xCal" />
        <input type="hidden" id="mCap" value="@xCap" />
        <input type="hidden" id="mAtn" value="@xAtn" />
        <input type="hidden" id="mFin" value="@xFin" />
        <input type="hidden" id="mMdl" value="@xMdl" />
        <input type="hidden" id="mDsc" value="@xDsc" />
        <input type="hidden" id="mLds" value="@xLds" />
        <input type="hidden" id="mBrl" value="@xBrl" />
        <input type="hidden" id="mOvl" value="@xOvl" />
        <input type="hidden" id="mWgt" value="@xWgt" />
        <input type="hidden" id="mImg" value="@xImg" />
        <input type="hidden" id="mOnly" value="false" />
        <input type="hidden" id="TxtSch">

    <div class="divLeft">
    <div id="divDfLinks">
        <div class="gunNav-Section">
            <div>
                <div id="divNewMfg" style="display: inline; padding-left: 9px">
                    <a class="gunNav-Link bold" href="/data-feed-admin/edit-manufacturers">New Manufacturers</a>
                </div>
                <div class="gunNav-Counter" id="ct1">(0)</div>
            </div>
            <div class="pad-top-5">
                <div id="divDupes" style="display: inline; padding-left: 9px">
                    <a class="gunNav-Link bold" href="/data-feed-admin/manage-duplicates">Duplicates</a>
                </div>
                <div class="gunNav-Counter" id="ct2">(0)</div>
            </div>
            <div class="pad-top-5">
                <div id="divMissData" style="display: inline; padding-left: 9px">
                    <a onclick="setMsChk()" class="gunNav-Link bold" href="/data-feed-admin/missing-gun-specs/all-specs">Missing Data</a>
                </div>
                <div class="gunNav-Counter" id="ct3">(0)</div>
                <div id="usLinks" class="pad-24">
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/gun-types">Gun Type</a>
                        </div>
                        <div class="gunNav-Counter" id="ct4">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/caliber">Caliber</a>
                        </div>
                        <div class="gunNav-Counter" id="ct5">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/capacity">Capacity</a>
                        </div>
                        <div class="gunNav-Counter" id="ct6">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/action">Action</a>
                        </div>
                        <div class="gunNav-Counter" id="ct7">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/finish">Finish</a>
                        </div>
                        <div class="gunNav-Counter" id="ct8">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/model">Model</a>
                        </div>
                        <div class="gunNav-Counter" id="ct9">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/desc">Description</a>
                        </div>
                        <div class="gunNav-Counter" id="ct10">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/long-desc">Long Desc</a>
                        </div>
                        <div class="gunNav-Counter" id="ct11">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/barrel">Barrel Length</a>
                        </div>
                        <div class="gunNav-Counter" id="ct12">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/overall">Overall Length</a>
                        </div>
                        <div class="gunNav-Counter" id="ct13">(0)</div>
                    </div>
                    <div>
                        <div style="display: inline">
                            <a onclick="setMsChk()" class="gunNav-Link" href="/data-feed-admin/missing-gun-specs/weight">Weight</a>
                        </div>
                        <div class="gunNav-Counter" id="ct14">(0)</div>
                    </div>
                </div>
            </div>
            <div class="pad-top-5">
                <div id="divImages" style="display: inline; padding-left: 9px">
                    <a onclick="setMsChk()" class="gunNav-Link bold" href="/data-feed-admin/edit-images">Images</a>
                </div>
                <div class="gunNav-Counter" id="ct15">(0)</div>
            </div>

        </div>
    </div>
    <div class="filterTxt">Filter Search:</div>


    <div style="padding-top: 10px">
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c1" name="c1" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - Hide CA AW's</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c2" name="c2" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - Hidden Items Only</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c3" name="c3" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - Hide Discontinued Items</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c4" name="c4" value="1" @isMsChk onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - Missing Specs Only</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c5" name="c5" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - On Data Feed</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c12" name="c12" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - Law Enforcement Only</div>
    </div>

    <div style="padding-top: 10px">
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c6" name="c6" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA Legal</div>
        <div class="filterCt" id="ct16">(0)</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c7" name="c7" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA Roster OK</div>
        <div class="filterCt" id="ct17">(0)</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c8" name="c8" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA Sgl-Atn Rev</div>
        <div class="filterCt" id="ct18">(0)</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c9" name="c9" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA Sgl-Sht Pst</div>
        <div class="filterCt" id="ct19">(0)</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c10" name="c10" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA Curio-Relic</div>
        <div class="filterCt" id="ct20">(0)</div>
    </div>
    <div>
        <div style="display: table-cell; width: 10px; vertical-align: middle; padding-right: 5px; padding-left: 19px">
            <input type="checkbox" id="c11" name="c11" value="1" onchange="loadRestricted()">
        </div>
        <div style="display: table-cell"> - CA PPT</div>
        <div class="filterCt" id="ct21">(0)</div>
    </div>


    <div style="padding-left: 10px; padding-top: 10px; font-size: 10px">
        <div style="padding-bottom: 10px">
            <div style="padding-bottom: 3px">Manufacturer:</div>
            <div>
                <select name="s2" id="s2" class="selectpicker" data-live-search="true" data-dropupauto="true" data-size="10" onchange="setMenuMfg(this.value)">
                    <option>- ALL MANUFACTURERS -</option>
                    @foreach (var item in Model.Menus.FeedManuf)
                    {
                        mfgSelected = item.IntValue == mfgId ? "selected" : string.Empty;

                        <option @mfgSelected value="@item.IntValue" data-subtext="(@String.Format("{0:n0}", item.ItemCount))">@item.MenuText</option>
                    }
                </select>

            </div>
        </div>
        <div style="padding-bottom: 10px">
            <div style="padding-bottom: 3px">Gun Type:</div>
            <div>
                <select name="s3" id="s3" class="selectpicker" data-live-search="true" data-dropupauto="true" onchange="setMenuGunType(this.value)">
                    <option>- ALL GUN TYPES -</option>
                    @foreach (var item in Model.Menus.FeedGunType)
                    {
                        mfgSelected = item.IntValue == mfgId ? "selected" : string.Empty;

                        <option @mfgSelected value="@item.IntValue" data-subtext="(@String.Format("{0:n0}", item.ItemCount))">@item.MenuText</option>
                    }
                </select>

            </div>
        </div>
        <div style="padding-bottom: 10px">
            <div style="padding-bottom: 3px">Caliber:</div>
            <div>
                <select name="s4" id="s4" class="selectpicker" data-live-search="true" data-dropupauto="true" data-size="10" onchange="setMenuCaliber(this.value)">
                    <option>- ALL CALIBERS -</option>
                    @foreach (var item in Model.Menus.FeedCaliber)
                    {
                        mfgSelected = item.IntValue == mfgId ? "selected" : string.Empty;

                        <option @mfgSelected value="@item.IntValue" data-subtext="(@String.Format("{0:n0}", item.ItemCount))">@item.MenuText</option>
                    }
                </select>

            </div>
        </div>
        <div style="padding-bottom: 10px">
            <div style="padding-bottom: 3px">Action:</div>
            <div>
                <select name="s5" id="s5" class="selectpicker" data-live-search="true" data-dropupauto="true" onchange="setMenuAction(this.value)">
                    <option>- ALL ACTIONS -</option>
                    @foreach (var item in Model.Menus.FeedAction)
                    {
                        mfgSelected = item.IntValue == mfgId ? "selected" : string.Empty;

                        <option @mfgSelected value="@item.IntValue" data-subtext="(@String.Format("{0:n0}", item.ItemCount))">@item.MenuText</option>
                    }
                </select>

            </div>
        </div>
        <div style="padding-bottom: 10px">
            <div style="padding-bottom: 3px">Date Range:</div>
            <div>
                <select name="s6" id="s6" class="selectpicker" data-live-search="true" data-dropupauto="true" onchange="setManuf(this.value)">
                    <option>- ANYTIME -</option>
                    @foreach (var item in Model.Menus.FeedDaysPast)
                    {
                        mfgSelected = item.IntValue == mfgId ? "selected" : string.Empty;

                        <option @mfgSelected value="@item.IntValue" data-subtext="(@String.Format("{0:n0}", item.ItemCount))">@item.MenuText</option>
                    }
                </select>

            </div>
        </div>
        <div style="padding-top: 5px; padding-bottom: 5px">Filter Additional Keyword(s):</div>
        <div style="display: inline">
            <div style="display: inline">
                <input type="text" id="t1" class="gun-txt-search" name="gunwordsearch" maxlength="50"><button id="btnWordSrch" type="button" class="btn btn-xs btn-Search" onclick="searchTxt()">Search</button>
            </div>
            <div style="display: inline; width: auto; padding-top: 15px"></div>
            <div style="background-color: #ffff00; width: 95%; margin-top: 5px">
                <div style="width: 50%; display: table-cell; float: left; padding-left: 3px">
                    <a id="clrWords" href="#" class="gunNav-Link" onclick="clearTxt()">Clear Keyword(s)</a>
                </div>
                <div style="width: 50%; display: table-cell; float: left; text-align: right;">
                    <a onclick="clearClick()" href="/data-feed-admin/missing-gun-specs" class="gunNav-Link">New Search</a>
                </div>
            </div>
        </div>
    </div>
    </div>
        <div class="divRight">
            <div class="gun-nav-heading">
                <div class="gunsPerPg">
                    <div style="display: inline-block">Guns Per Page:</div>
                    <div style="display: inline-block; vertical-align: middle; padding-left: 5px">
                        <select id="s1" class="sm-menu" onchange="setPageCount(this.value)">
                            <option value="100" selected="">100</option>
                            <option value="250">250</option>
                            <option value="500">500</option>
                        </select>
                    </div>
                </div>
                <div class="gun-count" id="gunCountHeader"></div>
                <div style="width: 150px; display: inline-block"></div>
            </div>
            <div class="main-grid">
                <div id="divPage">
                    <div style="float: left; padding-top: 10px; padding-right: 5px; padding-left: 10px; color: white; font-weight: bold;">Goto Page:</div>
                    <div style="float: left; margin-top: 6px" id="pageTop">
                        <div class="paging" id="pagerDt1">

                        </div>
                    </div>
                    <div style="display: inline-block; margin-top: 10px; float: left; margin-left: 10px; color: white" class="range-count"></div>
                    <div style="display: inline-block; margin-top: 3px; margin-bottom: 4px; float: right; "><button class="feed-BtnRed" id="btnUpdAll" onclick="return updateAllItems()">Update All</button></div>
                </div>
            </div>
            <div id="noData" class="gun-count" style="text-align: center; padding-top: 25px; display: none"></div>
            <div id="addGunWrap" style="max-width: 1600px; text-align: left; display: inline-block; margin-right: -10px"></div>
        </div>
    </form>
</div>

<script type="text/javascript" language="javascript">
    $(window).onload(Initialize());
</script>